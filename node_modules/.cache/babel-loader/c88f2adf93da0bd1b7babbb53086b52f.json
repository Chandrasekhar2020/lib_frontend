{"ast":null,"code":"import axios from\"axios\";import{isAdminAuth}from\"./admin\";export var getCart=function getCart(props){return axios.get(\"http://localhost:8000/users/book/borrowed/\".concat(props.regno)).then(function(resp){console.log(resp);}).catch(function(err){console.log(err);});};export var signIn=function signIn(props){var to=\"user\";if(props.isuser==0){to=\"admin\";}return axios.post(\"http://localhost:8000/signin/\".concat(to,\"/\"),{gmail:props.gmail,password:props.password}).then(function(resp){return resp;}).catch(function(err){console.log(err);});};export var isUserAuth=function isUserAuth(){var x=JSON.parse(localStorage.getItem(\"libstudent\"));return x;};export var getUser=function getUser(){if(isAdminAuth()){return axios.get('http://localhost:8000/admin/admin',{},{headers:{Authorization:\"Bearer \".concat(isAdminAuth().token)}}).then(function(resp){return resp;}).catch(function(err){console.log(err);});}return axios.get(\"http://localhost:8000/users/user/\".concat(isUserAuth().user.reg_no)).then(function(resp){return resp;}).catch(function(err){console.log(err);});};export var updateUser=function updateUser(obj){return axios.put(\"http://localhost:8000/users/update\",{obj:obj},{headers:{Authorization:\"Bearer \".concat(isUserAuth().token)}}).then(function(resp){console.log(resp);return resp;}).catch(function(err){console.log(err);});};export var createUser=function createUser(user){var isstu=\"user\";if(user.isuser==0){isstu=\"admin\";user.reg_no=undefined;}console.log(user);return axios.post(\"http://localhost:8000/signup/\".concat(isstu,\"/new\"),{name:user.name,gmail:user.gmail,reg_no:user.reg_no,password:user.password}).then(function(resp){return resp;}).catch(function(err){console.log(err);});};export var forgotPassword=function forgotPassword(data){if(data.admin){return axios.post(\"http://localhost:8000/forgot/admin/\".concat(data.token),{password:data.password}).then(function(resp){return resp;}).catch(function(err){console.log(err);});}else{return axios.post(\"http://localhost:8000/forgot/user/\".concat(data.token),{password:data.password}).then(function(resp){return resp;}).catch(function(err){console.log(err);});}};export var forgotPass=function forgotPass(data){if(data.admin){return axios.post(\"http://localhost:8000/forgot/admin/new/\",{gmail:data.gmail}).then(function(resp){return resp;}).catch(function(err){console.log(err);});}else{return axios.post(\"http://localhost:8000/forgot/user/new/\",{gmail:data.gmail}).then(function(resp){return resp;}).catch(function(err){console.log(err);});}};","map":{"version":3,"names":["axios","isAdminAuth","getCart","props","get","regno","then","resp","console","log","catch","err","signIn","to","isuser","post","gmail","password","isUserAuth","x","JSON","parse","localStorage","getItem","getUser","headers","Authorization","token","user","reg_no","updateUser","obj","put","createUser","isstu","undefined","name","forgotPassword","data","admin","forgotPass"],"sources":["C:/Users/gajul/Desktop/projects/library_management/client/src/controllers/user.js"],"sourcesContent":["import axios from \"axios\"\r\n\r\nimport { isAdminAuth } from \"./admin\";\r\n\r\n\r\nexport const getCart = (props) =>{\r\n    return axios.get(`http://localhost:8000/users/book/borrowed/${props.regno}`)\r\n    .then((resp)=>{\r\n       console.log(resp);\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    })\r\n}\r\nexport const signIn = (props) =>{\r\n    let to=\"user\";\r\n    if(props.isuser==0){to=\"admin\";}\r\n    \r\n    return  axios.post(`http://localhost:8000/signin/${to}/`,{\r\n        gmail:props.gmail,\r\n        password:props.password\r\n    })\r\n    .then((resp)=>{\r\n      return resp;\r\n \r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    })\r\n\r\n}\r\nexport const isUserAuth = () =>{\r\n    let x = JSON.parse(localStorage.getItem(\"libstudent\"));\r\n   \r\n    return x;\r\n}\r\nexport const getUser = () =>{\r\n    if(isAdminAuth()){\r\n        return axios.get('http://localhost:8000/admin/admin',{\r\n            \r\n        },\r\n        {\r\n            headers:{Authorization:`Bearer ${isAdminAuth().token}`}\r\n        })\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n    return axios.get(`http://localhost:8000/users/user/${isUserAuth().user.reg_no}`).then((resp)=>{\r\n        return resp;\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    \r\n    })\r\n\r\n}\r\nexport const updateUser = (obj) =>{\r\n    return axios.put(\"http://localhost:8000/users/update\",{\r\n        obj\r\n    },{headers:{\r\n        Authorization:`Bearer ${isUserAuth().token}`\r\n    }\r\n    \r\n    }).then((resp)=>{\r\n        console.log(resp);\r\n        return resp;\r\n        \r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    })\r\n};\r\nexport const  createUser = (user) =>{\r\n   \r\n    let isstu =\"user\";\r\n    if(user.isuser==0){isstu=\"admin\";user.reg_no=undefined;}\r\n    console.log(user);\r\n     return axios.post(`http://localhost:8000/signup/${isstu}/new`,{\r\n      name:user.name,\r\n      gmail:user.gmail,\r\n      reg_no:user.reg_no,\r\n      password:user.password\r\n     })\r\n     .then((resp)=>{\r\n        return resp;\r\n     })\r\n     .catch((err)=>{\r\n        console.log(err);\r\n     })\r\n}\r\nexport const forgotPassword = (data)=>{\r\n    if(data.admin){\r\n        return axios.post(`http://localhost:8000/forgot/admin/${data.token}`,\r\n        {\r\n           password:data.password\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n    else{\r\n        return axios.post(`http://localhost:8000/forgot/user/${data.token}`,\r\n        {\r\n            password:data.password\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })  \r\n    }\r\n\r\n\r\n}\r\n\r\nexport const forgotPass = (data)=>{\r\n    if(data.admin){\r\n        return axios.post(`http://localhost:8000/forgot/admin/new/`,\r\n        {\r\n            gmail:data.gmail\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n    else{\r\n        return axios.post(`http://localhost:8000/forgot/user/new/`,\r\n        {\r\n           gmail:data.gmail\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })  \r\n    }\r\n\r\n\r\n}"],"mappings":"AAAA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,WAAT,KAA4B,SAA5B,CAGA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,KAAD,CAAU,CAC7B,MAAOH,MAAK,CAACI,GAAN,qDAAuDD,KAAK,CAACE,KAA7D,GACNC,IADM,CACD,SAACC,IAAD,CAAQ,CACXC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACF,CAHM,EAING,KAJM,CAIA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CANM,CAAP,CAOH,CARM,CASP,MAAO,IAAMC,OAAM,CAAG,QAATA,OAAS,CAACT,KAAD,CAAU,CAC5B,GAAIU,GAAE,CAAC,MAAP,CACA,GAAGV,KAAK,CAACW,MAAN,EAAc,CAAjB,CAAmB,CAACD,EAAE,CAAC,OAAH,CAAY,CAEhC,MAAQb,MAAK,CAACe,IAAN,wCAA2CF,EAA3C,MAAiD,CACrDG,KAAK,CAACb,KAAK,CAACa,KADyC,CAErDC,QAAQ,CAACd,KAAK,CAACc,QAFsC,CAAjD,EAIPX,IAJO,CAIF,SAACC,IAAD,CAAQ,CACZ,MAAOA,KAAP,CAED,CAPO,EAQPG,KARO,CAQD,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAVO,CAAR,CAYH,CAhBM,CAiBP,MAAO,IAAMO,WAAU,CAAG,QAAbA,WAAa,EAAK,CAC3B,GAAIC,EAAC,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAX,CAAR,CAEA,MAAOJ,EAAP,CACH,CAJM,CAKP,MAAO,IAAMK,QAAO,CAAG,QAAVA,QAAU,EAAK,CACxB,GAAGvB,WAAW,EAAd,CAAiB,CACb,MAAOD,MAAK,CAACI,GAAN,CAAU,mCAAV,CAA8C,EAA9C,CAGP,CACIqB,OAAO,CAAC,CAACC,aAAa,kBAAWzB,WAAW,GAAG0B,KAAzB,CAAd,CADZ,CAHO,EAMNrB,IANM,CAMD,SAACC,IAAD,CAAQ,CACV,MAAOA,KAAP,CACH,CARM,EASNG,KATM,CASA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAXM,CAAP,CAYH,CACD,MAAOX,MAAK,CAACI,GAAN,4CAA8Cc,UAAU,GAAGU,IAAb,CAAkBC,MAAhE,GAA0EvB,IAA1E,CAA+E,SAACC,IAAD,CAAQ,CAC1F,MAAOA,KAAP,CACH,CAFM,EAGNG,KAHM,CAGA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EAEH,CANM,CAAP,CAQH,CAvBM,CAwBP,MAAO,IAAMmB,WAAU,CAAG,QAAbA,WAAa,CAACC,GAAD,CAAQ,CAC9B,MAAO/B,MAAK,CAACgC,GAAN,CAAU,oCAAV,CAA+C,CAClDD,GAAG,CAAHA,GADkD,CAA/C,CAEL,CAACN,OAAO,CAAC,CACPC,aAAa,kBAAWR,UAAU,GAAGS,KAAxB,CADN,CAAT,CAFK,EAMJrB,IANI,CAMC,SAACC,IAAD,CAAQ,CACZC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,MAAOA,KAAP,CAEH,CAVM,EAWNG,KAXM,CAWA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAbM,CAAP,CAcH,CAfM,CAgBP,MAAO,IAAOsB,WAAU,CAAG,QAAbA,WAAa,CAACL,IAAD,CAAS,CAEhC,GAAIM,MAAK,CAAE,MAAX,CACA,GAAGN,IAAI,CAACd,MAAL,EAAa,CAAhB,CAAkB,CAACoB,KAAK,CAAC,OAAN,CAAcN,IAAI,CAACC,MAAL,CAAYM,SAAZ,CAAuB,CACxD3B,OAAO,CAACC,GAAR,CAAYmB,IAAZ,EACC,MAAO5B,MAAK,CAACe,IAAN,wCAA2CmB,KAA3C,SAAuD,CAC7DE,IAAI,CAACR,IAAI,CAACQ,IADmD,CAE7DpB,KAAK,CAACY,IAAI,CAACZ,KAFkD,CAG7Da,MAAM,CAACD,IAAI,CAACC,MAHiD,CAI7DZ,QAAQ,CAACW,IAAI,CAACX,QAJ+C,CAAvD,EAMNX,IANM,CAMD,SAACC,IAAD,CAAQ,CACX,MAAOA,KAAP,CACF,CARM,EASNG,KATM,CASA,SAACC,GAAD,CAAO,CACXH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACF,CAXM,CAAP,CAYJ,CAjBM,CAkBP,MAAO,IAAM0B,eAAc,CAAG,QAAjBA,eAAiB,CAACC,IAAD,CAAQ,CAClC,GAAGA,IAAI,CAACC,KAAR,CAAc,CACV,MAAOvC,MAAK,CAACe,IAAN,8CAAiDuB,IAAI,CAACX,KAAtD,EACP,CACGV,QAAQ,CAACqB,IAAI,CAACrB,QADjB,CADO,EAKNX,IALM,CAKD,SAACC,IAAD,CAAQ,CACV,MAAOA,KAAP,CACH,CAPM,EAQNG,KARM,CAQA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAVM,CAAP,CAWH,CAZD,IAaI,CACA,MAAOX,MAAK,CAACe,IAAN,6CAAgDuB,IAAI,CAACX,KAArD,EACP,CACIV,QAAQ,CAACqB,IAAI,CAACrB,QADlB,CADO,EAKNX,IALM,CAKD,SAACC,IAAD,CAAQ,CACV,MAAOA,KAAP,CACH,CAPM,EAQNG,KARM,CAQA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAVM,CAAP,CAWH,CAGJ,CA7BM,CA+BP,MAAO,IAAM6B,WAAU,CAAG,QAAbA,WAAa,CAACF,IAAD,CAAQ,CAC9B,GAAGA,IAAI,CAACC,KAAR,CAAc,CACV,MAAOvC,MAAK,CAACe,IAAN,2CACP,CACIC,KAAK,CAACsB,IAAI,CAACtB,KADf,CADO,EAKNV,IALM,CAKD,SAACC,IAAD,CAAQ,CACV,MAAOA,KAAP,CACH,CAPM,EAQNG,KARM,CAQA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAVM,CAAP,CAWH,CAZD,IAaI,CACA,MAAOX,MAAK,CAACe,IAAN,0CACP,CACGC,KAAK,CAACsB,IAAI,CAACtB,KADd,CADO,EAKNV,IALM,CAKD,SAACC,IAAD,CAAQ,CACV,MAAOA,KAAP,CACH,CAPM,EAQNG,KARM,CAQA,SAACC,GAAD,CAAO,CACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACH,CAVM,CAAP,CAWH,CAGJ,CA7BM"},"metadata":{},"sourceType":"module"}