{"ast":null,"code":"import _slicedToArray from\"C:/Users/gajul/Desktop/projects/library_management/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{addBook}from\"../../controllers/book\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddBook=function AddBook(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setmsg=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),err=_useState4[0],seterr=_useState4[1];var _useState5=useState(new FormData()),_useState6=_slicedToArray(_useState5,2),f=_useState6[0],setf=_useState6[1];var fileChange=function fileChange(e){console.log(\"HELLO\");var form=f;form.set(\"photo\",e.target.files[0]);setf(form);};var submitForm=function submitForm(data){data=data.target;var form=new FormData();form=f;form.set(\"name\",data[0].value);form.set(\"author\",data[1].value);form.set(\"refno\",data[2].value);form.set(\"no_of_copies\",data[4].value);// let book = {\n//     name:data[0].value,\n//     author:data[1].value,\n//     refno:data[2].value,\n//     photo:data[3].value,\n//     no_of_copies:data[4].value\n// };\naddBook(form).then(function(resp){console.log(resp);if(resp.data.err==1){seterr(resp.data.error);setmsg(\"\");}else{setmsg(\"Successful\");seterr(\"\");document.getElementById(\"form2\").reset();}}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"sign\",align:\"center\",children:\"New Book\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form1\",id:\"form2\",onSubmit:function onSubmit(e){e.preventDefault();submitForm(e);},children:[err.length>0?/*#__PURE__*/_jsx(\"p\",{className:\"\",align:\"center\",style:{color:\"red\",fontSize:\"17px\",fontFamily:\"Ubuntu\"},children:err}):/*#__PURE__*/_jsx(_Fragment,{}),msg.length>0?/*#__PURE__*/_jsx(\"p\",{className:\"\",align:\"center\",style:{color:\"green\",fontSize:\"17px\",fontFamily:\"Ubuntu\"},children:msg}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"input\",{className:\"un \",type:\"text\",align:\"center\",placeholder:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{className:\"un \",type:\"text\",align:\"center\",placeholder:\"Author\"}),/*#__PURE__*/_jsx(\"input\",{className:\"un \",type:\"text\",align:\"center\",placeholder:\"Reference no\"}),/*#__PURE__*/_jsx(\"input\",{className:\"un\",type:\"file\",align:\"center\",placeholder:\"picture\",onChange:function onChange(e){fileChange(e);}}),/*#__PURE__*/_jsx(\"input\",{className:\"un \",type:\"text\",align:\"center\",placeholder:\"number of copies\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit\",align:\"center\",type:\"submit\",children:\"Add Book\"})]})]});};export default AddBook;","map":{"version":3,"names":["React","useState","addBook","AddBook","msg","setmsg","err","seterr","FormData","f","setf","fileChange","e","console","log","form","set","target","files","submitForm","data","value","then","resp","error","document","getElementById","reset","catch","preventDefault","length","color","fontSize","fontFamily"],"sources":["C:/Users/gajul/Desktop/projects/library_management/client/src/components/book/addBook.js"],"sourcesContent":["import React,{useState} from \"react\";\r\nimport { addBook } from \"../../controllers/book\";\r\nconst AddBook = () =>{\r\n    const [msg,setmsg] = useState(\"\");\r\n    const [err,seterr] = useState(\"\");\r\n    const [f,setf] = useState(new FormData());\r\n    const fileChange = (e) =>{\r\n      console.log(\"HELLO\");\r\n      let form = f;\r\n      form.set(\"photo\",e.target.files[0]);\r\n      setf(form);\r\n    }\r\n   const submitForm = (data) =>{\r\n    \r\n    data = data.target;\r\n    let form = new FormData();\r\n    form = f;\r\n    form.set(\"name\",data[0].value);\r\n    form.set(\"author\",data[1].value);\r\n    form.set(\"refno\",data[2].value);\r\n    form.set(\"no_of_copies\",data[4].value);\r\n    // let book = {\r\n    //     name:data[0].value,\r\n    //     author:data[1].value,\r\n    //     refno:data[2].value,\r\n    //     photo:data[3].value,\r\n    //     no_of_copies:data[4].value\r\n    // };\r\n\r\n  \r\n    addBook(form).then((resp)=>{\r\n      console.log(resp);\r\n      if(resp.data.err==1){\r\n       seterr(resp.data.error);\r\n       setmsg(\"\");\r\n      }\r\n      else{\r\n        setmsg(\"Successful\");\r\n        seterr(\"\");\r\n        document.getElementById(\"form2\").reset();\r\n      }\r\n    })\r\n    .catch((err)=>{\r\n      console.log(err);\r\n    })\r\n   }\r\n    return (\r\n        <div className=\"main\">\r\n          <p className=\"sign\" align=\"center\">New Book</p>\r\n          <form className=\"form1\" id=\"form2\" onSubmit={(e)=>{e.preventDefault();submitForm(e)}}>\r\n            {err.length>0?<p className=\"\" align=\"center\" style={{color:\"red\",fontSize:\"17px\",fontFamily:\"Ubuntu\"}} >{err}</p>:<></>}\r\n            {msg.length>0?<p className=\"\" align=\"center\" style={{color:\"green\",fontSize:\"17px\",fontFamily:\"Ubuntu\"}} >{msg}</p>:<></>}\r\n            <input className=\"un \" type=\"text\" align=\"center\" placeholder=\"Title\"/>\r\n            <input className=\"un \" type=\"text\" align=\"center\" placeholder=\"Author\"/>\r\n            <input className=\"un \" type=\"text\" align=\"center\" placeholder=\"Reference no\"/>\r\n            <input className=\"un\" type=\"file\" align=\"center\" placeholder=\"picture\" onChange={(e)=>{fileChange(e)}}/>\r\n            <input className=\"un \" type=\"text\" align=\"center\" placeholder=\"number of copies\"/>\r\n            <button className=\"submit\" align=\"center\" type=\"submit\">Add Book</button>\r\n          </form>           \r\n          </div>);\r\n\r\n}\r\nexport default AddBook;"],"mappings":"+IAAA,MAAOA,MAAP,EAAcC,QAAd,KAA6B,OAA7B,CACA,OAASC,OAAT,KAAwB,wBAAxB,C,6IACA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAK,CACjB,cAAqBF,QAAQ,CAAC,EAAD,CAA7B,wCAAOG,GAAP,eAAWC,MAAX,eACA,eAAqBJ,QAAQ,CAAC,EAAD,CAA7B,yCAAOK,GAAP,eAAWC,MAAX,eACA,eAAiBN,QAAQ,CAAC,GAAIO,SAAJ,EAAD,CAAzB,yCAAOC,CAAP,eAASC,IAAT,eACA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,CAAD,CAAM,CACvBC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACA,GAAIC,KAAI,CAAGN,CAAX,CACAM,IAAI,CAACC,GAAL,CAAS,OAAT,CAAiBJ,CAAC,CAACK,MAAF,CAASC,KAAT,CAAe,CAAf,CAAjB,EACAR,IAAI,CAACK,IAAD,CAAJ,CACD,CALD,CAMD,GAAMI,WAAU,CAAG,QAAbA,WAAa,CAACC,IAAD,CAAS,CAE3BA,IAAI,CAAGA,IAAI,CAACH,MAAZ,CACA,GAAIF,KAAI,CAAG,GAAIP,SAAJ,EAAX,CACAO,IAAI,CAAGN,CAAP,CACAM,IAAI,CAACC,GAAL,CAAS,MAAT,CAAgBI,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAxB,EACAN,IAAI,CAACC,GAAL,CAAS,QAAT,CAAkBI,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAA1B,EACAN,IAAI,CAACC,GAAL,CAAS,OAAT,CAAiBI,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAzB,EACAN,IAAI,CAACC,GAAL,CAAS,cAAT,CAAwBI,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAhC,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGAnB,OAAO,CAACa,IAAD,CAAP,CAAcO,IAAd,CAAmB,SAACC,IAAD,CAAQ,CACzBV,OAAO,CAACC,GAAR,CAAYS,IAAZ,EACA,GAAGA,IAAI,CAACH,IAAL,CAAUd,GAAV,EAAe,CAAlB,CAAoB,CACnBC,MAAM,CAACgB,IAAI,CAACH,IAAL,CAAUI,KAAX,CAAN,CACAnB,MAAM,CAAC,EAAD,CAAN,CACA,CAHD,IAII,CACFA,MAAM,CAAC,YAAD,CAAN,CACAE,MAAM,CAAC,EAAD,CAAN,CACAkB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,GACD,CACF,CAXD,EAYCC,KAZD,CAYO,SAACtB,GAAD,CAAO,CACZO,OAAO,CAACC,GAAR,CAAYR,GAAZ,EACD,CAdD,EAeA,CAjCD,CAkCC,mBACI,aAAK,SAAS,CAAC,MAAf,wBACE,UAAG,SAAS,CAAC,MAAb,CAAoB,KAAK,CAAC,QAA1B,sBADF,cAEE,cAAM,SAAS,CAAC,OAAhB,CAAwB,EAAE,CAAC,OAA3B,CAAmC,QAAQ,CAAE,kBAACM,CAAD,CAAK,CAACA,CAAC,CAACiB,cAAF,GAAmBV,UAAU,CAACP,CAAD,CAAV,CAAc,CAApF,WACGN,GAAG,CAACwB,MAAJ,CAAW,CAAX,cAAa,UAAG,SAAS,CAAC,EAAb,CAAgB,KAAK,CAAC,QAAtB,CAA+B,KAAK,CAAE,CAACC,KAAK,CAAC,KAAP,CAAaC,QAAQ,CAAC,MAAtB,CAA6BC,UAAU,CAAC,QAAxC,CAAtC,UAA2F3B,GAA3F,EAAb,cAAiH,kBADpH,CAEGF,GAAG,CAAC0B,MAAJ,CAAW,CAAX,cAAa,UAAG,SAAS,CAAC,EAAb,CAAgB,KAAK,CAAC,QAAtB,CAA+B,KAAK,CAAE,CAACC,KAAK,CAAC,OAAP,CAAeC,QAAQ,CAAC,MAAxB,CAA+BC,UAAU,CAAC,QAA1C,CAAtC,UAA6F7B,GAA7F,EAAb,cAAmH,kBAFtH,cAGE,cAAO,SAAS,CAAC,KAAjB,CAAuB,IAAI,CAAC,MAA5B,CAAmC,KAAK,CAAC,QAAzC,CAAkD,WAAW,CAAC,OAA9D,EAHF,cAIE,cAAO,SAAS,CAAC,KAAjB,CAAuB,IAAI,CAAC,MAA5B,CAAmC,KAAK,CAAC,QAAzC,CAAkD,WAAW,CAAC,QAA9D,EAJF,cAKE,cAAO,SAAS,CAAC,KAAjB,CAAuB,IAAI,CAAC,MAA5B,CAAmC,KAAK,CAAC,QAAzC,CAAkD,WAAW,CAAC,cAA9D,EALF,cAME,cAAO,SAAS,CAAC,IAAjB,CAAsB,IAAI,CAAC,MAA3B,CAAkC,KAAK,CAAC,QAAxC,CAAiD,WAAW,CAAC,SAA7D,CAAuE,QAAQ,CAAE,kBAACQ,CAAD,CAAK,CAACD,UAAU,CAACC,CAAD,CAAV,CAAc,CAArG,EANF,cAOE,cAAO,SAAS,CAAC,KAAjB,CAAuB,IAAI,CAAC,MAA5B,CAAmC,KAAK,CAAC,QAAzC,CAAkD,WAAW,CAAC,kBAA9D,EAPF,cAQE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,KAAK,CAAC,QAAjC,CAA0C,IAAI,CAAC,QAA/C,sBARF,GAFF,GADJ,CAeH,CA3DD,CA4DA,cAAeT,QAAf"},"metadata":{},"sourceType":"module"}