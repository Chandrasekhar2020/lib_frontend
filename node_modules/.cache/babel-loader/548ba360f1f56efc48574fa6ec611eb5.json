{"ast":null,"code":"import _objectSpread from\"C:/Users/gajul/Desktop/projects/library_management/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/gajul/Desktop/projects/library_management/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{isUserAuth,getUser,updateUser}from\"../controllers/user\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){if(isUserAuth()){getUser().then(function(resp){var _resp$data$resp=resp.data.resp,name=_resp$data$resp.name,borrowed=_resp$data$resp.borrowed,gmail=_resp$data$resp.gmail,reg_no=_resp$data$resp.reg_no,list=_resp$data$resp.list,fine_paid=_resp$data$resp.fine_paid,fee=_resp$data$resp.fee,_id=_resp$data$resp._id;var x={name:name,borrowed:borrowed,gmail:gmail,reg_no:reg_no,list:list,fine_paid:fine_paid,fee:fee,_id:_id};if(!user.gmail||user.borrowed!==x.borrowed||user.gmail!==x.gmail||x.reg_no!==user.gmail||x.list!=user.list){setUser(x);}}).catch(function(err){console.log(err);});}},[]);var Change=function Change(e){console.log(e);};var updateProfile=function updateProfile(){var name=user.name;var password=user.password;var obj={reg_no:user.reg_no};if(password!==\"\"){obj.password=password;}if(name!==\"\"){obj.name=name;}updateUser(obj).then(function(resp){setUser(resp.data.user);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container rounded bg-white mt-5 mb-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 border-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-center text-center p-3 py-5\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rounded-circle mt-5\",width:\"150px\",src:\"https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-weight-bold\",children:user.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-black-50\",children:user.gmail}),/*#__PURE__*/_jsx(\"span\",{children:\" \"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 border-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 py-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-right\",children:\"Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"labels\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Name\",value:user.name,onChange:function onChange(e){setUser(_objectSpread(_objectSpread({},user),{},{name:e.target.value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"labels\",children:\"Registration No\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Reg no\",value:user.reg_no,readOnly:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"labels\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"password\",value:user.password,onChange:function onChange(e){setUser(_objectSpread(_objectSpread({},user),{},{password:e.target.value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-10\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"labels\",children:\"Gmail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Gmail\",value:user.gmail,readOnly:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"labels\",children:\"Fine (Rs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"fine\",value:user.fee-user.fine_paid,readOnly:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary profile-button\",type:\"button\",onClick:updateProfile,children:\"Save Profile\"})})]})})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","isUserAuth","getUser","updateUser","Profile","user","setUser","then","resp","data","name","borrowed","gmail","reg_no","list","fine_paid","fee","_id","x","catch","err","console","log","Change","e","updateProfile","password","obj","target","value"],"sources":["C:/Users/gajul/Desktop/projects/library_management/client/src/components/profile.js"],"sourcesContent":["import React,{useEffect,useState} from \"react\";\r\nimport { isUserAuth,getUser, updateUser } from \"../controllers/user\";\r\nconst Profile = () =>{\r\n    const [user,setUser] = useState({});\r\n   \r\n    useEffect(()=>{\r\n     \r\n        if(isUserAuth()){\r\n         getUser().then((resp)=>{ \r\n           let {name,borrowed,gmail,reg_no,list,fine_paid,fee,_id} = resp.data.resp;\r\n           let x = {name,borrowed,gmail,reg_no,list,fine_paid,fee,_id};\r\n           if(!user.gmail || user.borrowed!==x.borrowed || user.gmail!==x.gmail || x.reg_no!==user.gmail || x.list!=user.list){\r\n           setUser(x);\r\n         \r\n           }\r\n         })\r\n         .catch((err)=>{console.log(err);})\r\n          \r\n           \r\n          \r\n        }\r\n         },[]);\r\n         const Change = (e) =>{\r\n          console.log(e);\r\n         };\r\n         const updateProfile=()=>{\r\n           let name = user.name;\r\n           let password=user.password;\r\n           \r\n           let obj = {reg_no:user.reg_no};\r\n          \r\n           if(password!==\"\"){\r\n              obj.password  = password;\r\n           }\r\n           if(name!==\"\"){\r\n            obj.name = name;\r\n           }\r\n           updateUser(obj).then((resp)=>{\r\n          setUser(resp.data.user);\r\n           })\r\n           .catch((err)=>{\r\n            console.log(err);\r\n           })\r\n         }\r\n    return (\r\n\r\n<div className=\"container rounded bg-white mt-5 mb-5\">\r\n    <div className=\"row\">\r\n        <div className=\"col-md-3 border-right\">\r\n            <div className=\"d-flex flex-column align-items-center text-center p-3 py-5\"><img className=\"rounded-circle mt-5\" width=\"150px\" src=\"https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg\"/><span className=\"font-weight-bold\">{user.name}</span><span className=\"text-black-50\">{user.gmail}</span><span> </span></div>\r\n        </div>\r\n        <div className=\"col-md-5 border-right\">\r\n            <div className=\"p-3 py-5\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                    <h4 className=\"text-right\">Profile</h4>\r\n                </div>\r\n                <div className=\"row mt-2\">\r\n                    <div className=\"col-md-6\"><label className=\"labels\">Name</label><input type=\"text\" className=\"form-control\" placeholder=\"Name\" value={user.name} onChange={(e)=>{setUser({...user,name:e.target.value});}}/></div>\r\n                    <div className=\"col-md-6\"><label className=\"labels\">Registration No</label><input type=\"text\" className=\"form-control\" placeholder=\"Reg no\" value={user.reg_no} readOnly/></div>  \r\n                </div>\r\n                <div className=\"row mt-3\">\r\n                <div className=\"col-md-6\"><label className=\"labels\">Password</label><input type=\"password\" className=\"form-control\" placeholder=\"password\" value={user.password} onChange={(e)=>{setUser({...user,password:e.target.value});}} /></div>\r\n                </div>\r\n                <div className=\"row mt-3\">\r\n                <div className=\"col-md-10\"><label className=\"labels\">Gmail</label><input type=\"text\" className=\"form-control\" placeholder=\"Gmail\" value={user.gmail} readOnly/></div>\r\n                </div>\r\n                <div className=\"row mt-3\">\r\n                <div className=\"col-md-6\"><label className=\"labels\">Fine (Rs)</label><input type=\"text\" className=\"form-control\" placeholder=\"fine\" value={user.fee-user.fine_paid} readOnly/></div>\r\n                </div>\r\n                <div className=\"mt-5 text-center\"><button className=\"btn btn-primary profile-button\" type=\"button\" onClick={updateProfile}>Save Profile</button></div>\r\n            </div>\r\n        </div>\r\n       \r\n    </div>\r\n</div>\r\n\r\n    );\r\n\r\n}\r\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}