{"ast":null,"code":"import _slicedToArray from\"C:/Users/gajul/Desktop/projects/library_management/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Navbar from\"./components/navbar\";import Home from\"./components/home\";import{Route,Routes}from\"react-router-dom\";import{getBooks}from\"./controllers/book\";import SignIn from\"./components/signin\";import SignUp from\"./components/signup\";import AddBook from\"./components/book/addBook\";import Cart from\"./components/cart/cart\";import Profile from\"./components/profile\";import{isUserAuth,getUser}from\"./controllers/user\";import MangageBook from\"./components/admin/givetakebook\";import{getBookDetail}from\"./controllers/book\";import ForgotPassword from\"./components/forgotPassword\";import ForgotPass from\"./components/forgotPass\";import Loading from\"./components/loading\";import RemoveBook from\"./components/book/removeBook\";import Search from\"./components/search\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),books=_useState2[0],setBooks=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),borrowed=_useState8[0],setBorrowed=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),list=_useState10[0],setList=_useState10[1];useEffect(function(){setLoading(1);if(isUserAuth()){getUser().then(function(respx){setUser(respx.data.resp);getBooks().then(function(resp){var flag=1;if(resp&&books.length===resp.length){var f=0;for(var i=0;i<books.length;i++){if(books[i]!==resp[i]){flag=1;}}if(f===0){flag=0;}}if(flag){setBooks(resp);var x=[{}];var _f=new Map();if(respx.data.resp.borrowed){respx.data.resp.borrowed.map(function(e){_f.set(e.book_id,e);});resp.map(function(e){if(_f.has(e._id)){var hh=e;var gg=_f.get(e._id);hh.givendate=gg.givendate;hh.takendate=gg.takendate;x.push(hh);}});x.splice(0,1);setBorrowed(x);}if(respx.data.resp.list){var y=[{}];var fx=new Map();respx.data.resp.list.map(function(e){fx.set(e.book_id,e);});resp.map(function(e){if(fx.has(e._id)){var hh=e;var gg=fx.get(e._id);hh.givendate=gg.givendate;hh.takendate=gg.takendate;y.push(hh);}});y.splice(0,1);setList(y);}}});}).catch(function(err){console.log(err);});}else{getBooks().then(function(resp){setBooks(resp);}).catch(function(err){console.log(err);});}var now=new Date().getTime();var interval=setInterval(function(){if(new Date().getTime()-now>500){clearInterval(interval);setLoading(0);return;}},500);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{}),loading?/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",justifyContent:\"center\",justifyItems:\"center\",display:\"flex\"},children:/*#__PURE__*/_jsx(Loading,{})}):/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/signin\",element:/*#__PURE__*/_jsx(SignIn,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsx(Route,{path:\"/addbook\",element:/*#__PURE__*/_jsx(AddBook,{})}),/*#__PURE__*/_jsx(Route,{path:\"/deletebook\",element:/*#__PURE__*/_jsx(RemoveBook,{})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(Cart,{list:list,books:borrowed,fine:user.fine_paid,fee:user.fee})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsx(Route,{path:\"/search\",element:/*#__PURE__*/_jsx(Search,{})}),/*#__PURE__*/_jsx(Route,{path:\"/managebook\",element:/*#__PURE__*/_jsx(MangageBook,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot/verify/:token\",element:/*#__PURE__*/_jsx(ForgotPassword,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot\",element:/*#__PURE__*/_jsx(ForgotPass,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:/*#__PURE__*/_jsx(Home,{books:books,load:loading})})]})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Home","Route","Routes","getBooks","SignIn","SignUp","AddBook","Cart","Profile","isUserAuth","getUser","MangageBook","getBookDetail","ForgotPassword","ForgotPass","Loading","RemoveBook","Search","App","books","setBooks","user","setUser","loading","setLoading","borrowed","setBorrowed","list","setList","then","respx","data","resp","flag","length","f","i","x","Map","map","e","set","book_id","has","_id","hh","gg","get","givendate","takendate","push","splice","y","fx","catch","err","console","log","now","Date","getTime","interval","setInterval","clearInterval","width","justifyContent","justifyItems","display","fine_paid","fee"],"sources":["C:/Users/gajul/Desktop/projects/library_management/client/src/App.js"],"sourcesContent":["import React,{useEffect,useState} from \"react\";\nimport Navbar from \"./components/navbar\";\nimport Home from \"./components/home\";\nimport {Route,Routes} from \"react-router-dom\";\nimport { getBooks } from \"./controllers/book\";\nimport SignIn from \"./components/signin\";\nimport SignUp from \"./components/signup\";\nimport AddBook from \"./components/book/addBook\";\nimport Cart from \"./components/cart/cart\";\nimport Profile from \"./components/profile\";\nimport { isUserAuth,getUser } from \"./controllers/user\";\nimport MangageBook from \"./components/admin/givetakebook\";\nimport {getBookDetail} from \"./controllers/book\";\nimport ForgotPassword from \"./components/forgotPassword\";\nimport ForgotPass from \"./components/forgotPass\";\nimport Loading from \"./components/loading\";\nimport RemoveBook from \"./components/book/removeBook\";\nimport Search from \"./components/search\";\nfunction App() {\n  const [books,setBooks] = useState([]);\n  const [user,setUser] = useState({});\n  const [loading,setLoading] = useState(1);\n  const [borrowed,setBorrowed] = useState([]);\n  const [list,setList] = useState([]);\n useEffect(()=>{\n  setLoading(1);\n \n  if(isUserAuth()){\n    getUser().then((respx)=>{\n      setUser(respx.data.resp);\n      getBooks().then((resp)=>{\n        let flag=1;\n        if(resp && books.length===resp.length){let f=0;\n          for(let i=0;i<books.length;i++){\n          if(books[i]!==resp[i]){flag=1;}}\n        if(f===0){flag=0;}}\n      if(flag){setBooks(resp);\n         let x = [{}];\n         let f = new Map();\n         if(respx.data.resp.borrowed){\n         respx.data.resp.borrowed.map((e)=>{f.set(e.book_id,e);})\n         resp.map((e)=>{\n          if(f.has(e._id)){\n                let hh = e;\n                let gg = f.get(e._id);\n                hh.givendate = gg.givendate;\n                hh.takendate = gg.takendate;\n               x.push(hh);\n          }\n         });\n         x.splice(0,1);\n         setBorrowed(x);\n        }\n        if(respx.data.resp.list){\n          let y = [{}];\n          let fx  = new Map();\n            respx.data.resp.list.map((e)=>{\n              fx.set(e.book_id,e);\n            });\n            resp.map((e)=>{\n              if(fx.has(e._id)){\n                let hh = e;\n                let gg = fx.get(e._id);\n                hh.givendate = gg.givendate;\n                hh.takendate = gg.takendate;\n                y.push(hh);\n              }\n            });\n            y.splice(0,1);\n            setList(y);        \n        }\n    \n      }\n      \n    });\n      \n    })\n      .catch((err)=>{\n        console.log(err);\n      });\n \n\n}\nelse{\n  getBooks().then((resp)=>{\n    setBooks(resp);\n  })\n  .catch((err)=>{\n    console.log(err);\n  })\n}\nvar now = new Date().getTime();\nvar interval = setInterval(function () {\n   if (new Date().getTime() - now > 500) {\n      clearInterval(interval);\n      setLoading(0);\n      return;\n   }\n   \n}, 500);\n\n },[]);\n  return (\n     <div className=\"App\">\n       <Navbar/>\n      {loading?<div style={{width:\"100%\",justifyContent:\"center\",justifyItems:\"center\",display:\"flex\"}}><Loading/></div>:\n     <div className=\"App\">\n           <Routes>\n            <Route path='/signin' element={<SignIn/>}/>\n            <Route path='/signup' element={<SignUp/>}/>\n            <Route path='/addbook' element={<AddBook/>}/>\n            <Route path='/deletebook' element={<RemoveBook/>}/>\n            <Route path=\"/cart\" element={<Cart list={list} books={borrowed} fine={user.fine_paid} fee={user.fee}/>}/>\n            <Route path=\"/profile\" element={<Profile/>}/>\n            <Route path=\"/search\" element={<Search/>}/>\n            <Route path=\"/managebook\" element={<MangageBook/>}/>\n            <Route path=\"/forgot/verify/:token\" element={<ForgotPassword/>}/>\n            <Route path=\"/forgot\" element={<ForgotPass/>}/>\n            <Route exact path='/' element={<Home books={books} load={loading}/>}/>\n           \n\n           </Routes>\n           \n    </div>\n}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}