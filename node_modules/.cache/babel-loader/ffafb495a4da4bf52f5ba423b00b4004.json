{"ast":null,"code":"import axios from \"axios\";\nimport { isAdminAuth } from \"./admin\";\nconst API_URL = \"https://library-management-eawgfkg0e-chandrasekhar2020.vercel.app/\";\nexport const getCart = props => {\n  return axios.get(`${API_URL}/users/book/borrowed/${props.regno}`).then(resp => {\n    console.log(resp);\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const signIn = props => {\n  let to = \"user\";\n\n  if (props.isuser == 0) {\n    to = \"admin\";\n  }\n\n  return axios.post(`${API_URL}/signin/${to}/`, {\n    gmail: props.gmail,\n    password: props.password\n  }).then(resp => {\n    return resp;\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const isUserAuth = () => {\n  let x = JSON.parse(localStorage.getItem(\"libstudent\"));\n  return x;\n};\nexport const getUser = () => {\n  if (isAdminAuth()) {\n    return axios.get('${API_URL}/admin/admin', {}, {\n      headers: {\n        Authorization: `Bearer ${isAdminAuth().token}`\n      }\n    }).then(resp => {\n      return resp;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  return axios.get(`${API_URL}/users/user/${isUserAuth().user.reg_no}`).then(resp => {\n    return resp;\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const updateUser = obj => {\n  return axios.put(\"${API_URL}/users/update\", {\n    obj\n  }, {\n    headers: {\n      Authorization: `Bearer ${isUserAuth().token}`\n    }\n  }).then(resp => {\n    console.log(resp);\n    return resp;\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const createUser = user => {\n  let isstu = \"user\";\n\n  if (user.isuser == 0) {\n    isstu = \"admin\";\n    user.reg_no = undefined;\n  }\n\n  console.log(user);\n  return axios.post(`${API_URL}/signup/${isstu}/new`, {\n    name: user.name,\n    gmail: user.gmail,\n    reg_no: user.reg_no,\n    password: user.password\n  }).then(resp => {\n    return resp;\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const forgotPassword = data => {\n  if (data.admin) {\n    return axios.post(`${API_URL}/forgot/admin/${data.token}`, {\n      password: data.password\n    }).then(resp => {\n      return resp;\n    }).catch(err => {\n      console.log(err);\n    });\n  } else {\n    return axios.post(`${API_URL}/forgot/user/${data.token}`, {\n      password: data.password\n    }).then(resp => {\n      return resp;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n};\nexport const forgotPass = data => {\n  if (data.admin) {\n    return axios.post(`${API_URL}/forgot/admin/new/`, {\n      gmail: data.gmail\n    }).then(resp => {\n      return resp;\n    }).catch(err => {\n      console.log(err);\n    });\n  } else {\n    return axios.post(`${API_URL}/forgot/user/new/`, {\n      gmail: data.gmail\n    }).then(resp => {\n      return resp;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n};","map":{"version":3,"names":["axios","isAdminAuth","API_URL","getCart","props","get","regno","then","resp","console","log","catch","err","signIn","to","isuser","post","gmail","password","isUserAuth","x","JSON","parse","localStorage","getItem","getUser","headers","Authorization","token","user","reg_no","updateUser","obj","put","createUser","isstu","undefined","name","forgotPassword","data","admin","forgotPass"],"sources":["C:/Users/gajul/Desktop/projects/library_management/client/src/controllers/user.js"],"sourcesContent":["import axios from \"axios\"\r\n\r\nimport { isAdminAuth } from \"./admin\";\r\nconst API_URL=\"https://library-management-eawgfkg0e-chandrasekhar2020.vercel.app/\"\r\n\r\nexport const getCart = (props) =>{\r\n    return axios.get(`${API_URL}/users/book/borrowed/${props.regno}`)\r\n    .then((resp)=>{\r\n       console.log(resp);\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    })\r\n}\r\nexport const signIn = (props) =>{\r\n    let to=\"user\";\r\n    if(props.isuser==0){to=\"admin\";}\r\n    \r\n    return  axios.post(`${API_URL}/signin/${to}/`,{\r\n        gmail:props.gmail,\r\n        password:props.password\r\n    })\r\n    .then((resp)=>{\r\n      return resp;\r\n \r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    })\r\n\r\n}\r\nexport const isUserAuth = () =>{\r\n    let x = JSON.parse(localStorage.getItem(\"libstudent\"));\r\n   \r\n    return x;\r\n}\r\nexport const getUser = () =>{\r\n    if(isAdminAuth()){\r\n        return axios.get('${API_URL}/admin/admin',{\r\n            \r\n        },\r\n        {\r\n            headers:{Authorization:`Bearer ${isAdminAuth().token}`}\r\n        })\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n    return axios.get(`${API_URL}/users/user/${isUserAuth().user.reg_no}`).then((resp)=>{\r\n        return resp;\r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    \r\n    })\r\n\r\n}\r\nexport const updateUser = (obj) =>{\r\n    return axios.put(\"${API_URL}/users/update\",{\r\n        obj\r\n    },{headers:{\r\n        Authorization:`Bearer ${isUserAuth().token}`\r\n    }\r\n    \r\n    }).then((resp)=>{\r\n        console.log(resp);\r\n        return resp;\r\n        \r\n    })\r\n    .catch((err)=>{\r\n        console.log(err);\r\n    })\r\n};\r\nexport const  createUser = (user) =>{\r\n   \r\n    let isstu =\"user\";\r\n    if(user.isuser==0){isstu=\"admin\";user.reg_no=undefined;}\r\n    console.log(user);\r\n     return axios.post(`${API_URL}/signup/${isstu}/new`,{\r\n      name:user.name,\r\n      gmail:user.gmail,\r\n      reg_no:user.reg_no,\r\n      password:user.password\r\n     })\r\n     .then((resp)=>{\r\n        return resp;\r\n     })\r\n     .catch((err)=>{\r\n        console.log(err);\r\n     })\r\n}\r\nexport const forgotPassword = (data)=>{\r\n    if(data.admin){\r\n        return axios.post(`${API_URL}/forgot/admin/${data.token}`,\r\n        {\r\n           password:data.password\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n    else{\r\n        return axios.post(`${API_URL}/forgot/user/${data.token}`,\r\n        {\r\n            password:data.password\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })  \r\n    }\r\n\r\n\r\n}\r\n\r\nexport const forgotPass = (data)=>{\r\n    if(data.admin){\r\n        return axios.post(`${API_URL}/forgot/admin/new/`,\r\n        {\r\n            gmail:data.gmail\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n    else{\r\n        return axios.post(`${API_URL}/forgot/user/new/`,\r\n        {\r\n           gmail:data.gmail\r\n        }\r\n        )\r\n        .then((resp)=>{\r\n            return resp;\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })  \r\n    }\r\n\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}